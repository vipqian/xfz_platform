function AddCourse(){}AddCourse.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},AddCourse.prototype.listenQnUploadFileEvent=function(){var s=this,e=$("#thumbnail-btn");e.change(function(){var i=e[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(e){if(200===e.code){var o=e.data.token,t=(new Date).getTime()+"."+i.name.split(".")[1],r={fname:t,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},n={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(i,t,o,r,n).subscribe({next:s.updateUploadProgress,error:s.uploadErrorEvent,complete:s.complateUploadEvent})}}})})},AddCourse.prototype.updateUploadProgress=function(e){var o=e.total.percent;AddCourse.progressGroup.show();var t=$(".progress-bar"),r=o.toFixed(0)+"%";t.css({width:r}),t.text(r)},AddCourse.prototype.uploadErrorEvent=function(e){AddCourse.progressGroup.hide(),"file type doesn't match with what you specify"===e.message&&window.messageBox.show("上传的文件不匹配")},AddCourse.prototype.complateUploadEvent=function(e){AddCourse.progressGroup.hide();var o=$(".progress-bar");o.css({width:0}),o.text("0%");var t="http://ps9lpfh8q.bkt.clouddn.com/"+e.key;$("#thumbnail-form").val(t)},AddCourse.prototype.listenSumbitEvent=function(){$("#sub-btn").click(function(e){e.preventDefault();var o=$("input[name='title']").val(),t=$("select[name='category']").val(),r=$("select[name='teacher']").val(),n=$("input[name='voideUrl']").val(),i=$("input[name='coverUrl']").val(),s=$("input[name='price']").val(),a=$("input[name='duration']").val(),u=window.ue.getContent();xfzajax.post({url:"/cms/add_course/",data:{title:o,category:t,teacher:r,video_url:n,cover_url:i,price:s,duration:a,profile:u},success:function(e){if(console.log(e),200===e.code)window.messageBox.show("发布成功"),setTimeout(function(){window.location.href="http://129.28.158.195:8000/cms/course_list/"},3e3);else{var o=e.message;if("string"==typeof o||"String"==o.constructor)window.messageBox.show(e.message);else for(var t in o){var r=o[t][0];window.messageBox.show(r)}}}})})},AddCourse.prototype.run=function(){this.initUEditor(),this.listenQnUploadFileEvent(),this.listenSumbitEvent()},$(function(){(new AddCourse).run(),AddCourse.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtcy9jb3Vyc2UvYWRkX2NvdXJzZS5qcyJdLCJuYW1lcyI6WyJBZGRDb3Vyc2UiLCJwcm90b3R5cGUiLCJpbml0VUVkaXRvciIsIndpbmRvdyIsInVlIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJsaXN0ZW5RblVwbG9hZEZpbGVFdmVudCIsInNlbGYiLCJ0aGlzIiwidXBsb2FkQnRuIiwiJCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsInB1dEV4dHJhIiwiZm5hbWUiLCJwYXJhbXMiLCJtaW1lVHlwZSIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsInVwZGF0ZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJ1cGxvYWRFcnJvckV2ZW50IiwiY29tcGxldGUiLCJjb21wbGF0ZVVwbG9hZEV2ZW50IiwicmVzcG9uc2UiLCJwZXJjZW50IiwidG90YWwiLCJwcm9ncmVzc0dyb3VwIiwic2hvdyIsInByb2dyZXNzQmFyIiwicHJvZ3Jlc3NUZXh0IiwidG9GaXhlZCIsImNzcyIsIndpZHRoIiwidGV4dCIsImhpZGUiLCJtZXNzYWdlIiwibWVzc2FnZUJveCIsImltZ1VybCIsInZhbCIsImxpc3RlblN1bWJpdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRlZ29yeSIsInRlYWNoZXIiLCJ2aWRlb191cmwiLCJjb3Zlcl91cmwiLCJwcmljZSIsImR1cmF0aW9uIiwicHJvZmlsZSIsImdldENvbnRlbnQiLCJwb3N0IiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJzZXRUaW1lb3V0IiwibG9jYXRpb24iLCJo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VCxLQUFLN0IsRUFBZ0IsY0FFdkMsSUFBSyxJQUFJRSxLQUFPMkQsRUFBZSxDQUMzQixJQUNJeEIsRUFEV3dCLEVBQWMzRCxHQUNOLEdBQ3ZCcEIsT0FBT3dELFdBQVdULEtBQUtRLFdBV25EMUQsVUFBVUMsVUFBVW1GLElBQU0sV0FDdEJ6RSxLQUFLVCxjQUNMUyxLQUFLRiwwQkFDTEUsS0FBS21ELHFCQUlUakQsRUFBRSxZQUNrQixJQUFJYixXQUNWb0YsTUFDVnBGLFVBQVVpRCxjQUFnQnBDLEVBQUUiLCJmaWxlIjoiY21zL2NvdXJzZS9hZGRfY291cnNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZnVuY3Rpb24gQWRkQ291cnNlKCkge1xuXG59XG5cblxuQWRkQ291cnNlLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicse1xuICAgICAgICAvLyDnvJbovpHlmajpq5jluqZcbiAgICAgICAgJ2luaXRpYWxGcmFtZUhlaWdodCc6IDQwMCxcbiAgICAgICAgLy8g5L2/55So5Zu+54mH5LiK5LygXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcbiAgICB9KTtcbn07XG5cbkFkZENvdXJzZS5wcm90b3R5cGUubGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4nLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25ZCNXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuW5Y+C5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ZmQ5Yi255qE5paH5Lu257G75Z6LXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCd2aWRlby94LW1zLXdtdicsJ2ltYWdlL2pwZWcnXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5piv5ZCm5Yqg6YCfXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpLHotKXlkI7ku47mlrDkuIrkvKDnmoTmrKHmlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIPniZvlnLDljLpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnoyXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaWh+S7tui/h+eoi+S4reWRiuivieS9oOS4iuS8oOWkmuWwkVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0XCI6c2VsZi51cGRhdGVVcGxvYWRQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaWh+S7tuWHuueOsOmUmeivr1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvclwiOnNlbGYudXBsb2FkRXJyb3JFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tuS4iuS8oOaIkOWKn+eahOWbnuiwg+WHveaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wbGV0ZVwiOiBzZWxmLmNvbXBsYXRlVXBsb2FkRXZlbnRcbiAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn07XG5cbkFkZENvdXJzZS5wcm90b3R5cGUudXBkYXRlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyDkuIrkvKDov4fnqIvkuK3lgZrnmoTkuovmg4VcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gQWRkQ291cnNlLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xuICAgIHZhciBwcm9ncmVzc1RleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSc7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiBwcm9ncmVzc1RleHR9KTtcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHByb2dyZXNzVGV4dCk7XG5cbn07XG5cbkFkZENvdXJzZS5wcm90b3R5cGUudXBsb2FkRXJyb3JFdmVudCA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gQWRkQ291cnNlLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdmaWxlIHR5cGUgZG9lc25cXCd0IG1hdGNoIHdpdGggd2hhdCB5b3Ugc3BlY2lmeScpe1xuICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCfkuIrkvKDnmoTmlofku7bkuI3ljLnphY0nKTtcbiAgICB9XG5cbn07XG5cbkFkZENvdXJzZS5wcm90b3R5cGUuY29tcGxhdGVVcGxvYWRFdmVudCA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gQWRkQ291cnNlLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xuICAgIHByb2dyZXNzQmFyLmNzcyh7J3dpZHRoJzogMH0pO1xuICAgIHByb2dyZXNzQmFyLnRleHQoJzAlJyk7XG5cbiAgICB2YXIgaW1nVXJsID0gJ2h0dHA6Ly9wczlscGZoOHEuYmt0LmNsb3VkZG4uY29tLycrIHJlc3BvbnNlLmtleTtcbiAgICB2YXIgdGh1bWJuYWlsRnJvbSA9ICQoJyN0aHVtYm5haWwtZm9ybScpO1xuICAgIHRodW1ibmFpbEZyb20udmFsKGltZ1VybCk7XG59O1xuXG5BZGRDb3Vyc2UucHJvdG90eXBlLmxpc3RlblN1bWJpdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdWJCdG4gPSAkKCcjc3ViLWJ0bicpO1xuICAgIHN1YkJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHRlYWNoZXIgPSAkKFwic2VsZWN0W25hbWU9J3RlYWNoZXInXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHZpZGVvX3VybCA9ICQoXCJpbnB1dFtuYW1lPSd2b2lkZVVybCddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY292ZXJfdXJsID0gJChcImlucHV0W25hbWU9J2NvdmVyVXJsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBwcmljZSA9ICQoXCJpbnB1dFtuYW1lPSdwcmljZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZHVyYXRpb24gPSAkKFwiaW5wdXRbbmFtZT0nZHVyYXRpb24nXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHByb2ZpbGUgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xuXG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9hZGRfY291cnNlLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAndGVhY2hlcic6ICB0ZWFjaGVyLFxuICAgICAgICAgICAgICAgICd2aWRlb191cmwnOiB2aWRlb191cmwsXG4gICAgICAgICAgICAgICAgJ2NvdmVyX3VybCc6IGNvdmVyX3VybCxcbiAgICAgICAgICAgICAgICAncHJpY2UnOiBwcmljZSxcbiAgICAgICAgICAgICAgICAnZHVyYXRpb24nOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAncHJvZmlsZSc6IHByb2ZpbGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+WPkeW4g+aIkOWKnycpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uLmhyZWY9XCJodHRwOi8vMTI5LjI4LjE1OC4xOTU6ODAwMC9jbXMvY291cnNlX2xpc3QvXCI7fSwzMDAwKVxuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3mmK/kuI3mmK/lrZfnrKbkuLJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlT2JqZWN0ID09IFwic3RyaW5nXCIgfHwgbWVzc2FnZU9iamVjdC5jb25zdHJ1Y3RvciA9PSAnU3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhyZXN1bHRbJ21lc3NhZ2UnXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWVzc2FnZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG59O1xuXG5cblxuQWRkQ291cnNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbml0VUVkaXRvcigpO1xuICAgIHRoaXMubGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICB0aGlzLmxpc3RlblN1bWJpdEV2ZW50KCk7XG59O1xuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhZGRDb3Vyc2UgPSBuZXcgQWRkQ291cnNlKCk7XG4gICAgYWRkQ291cnNlLnJ1bigpO1xuICAgIEFkZENvdXJzZS5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XG59KTtcblxuXG4iXX0=
