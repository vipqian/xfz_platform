function News(){}$(function(){(new News).run(),News.progressGroup=$("#progress-group")}),News.prototype.run=function(){this.listenUploadFileEvent(),this.initUEditor(),this.listenSumbitEvent()},News.prototype.listenUploadFileEvent=function(){var o=$("#thumbnail-btn");o.change(function(){var e=o[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){200===e.code&&(url=e.data.url,$("#thumbnail-form").val(url))}})})},News.prototype.listenQnUploadFileEvent=function(){var a=this,e=$("#thumbnail-btn");e.change(function(){var s=e[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(e){if(200===e.code){var t=e.data.token,o=(new Date).getTime()+"."+s.name.split(".")[1],n={fname:o,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(s,o,t,n,i).subscribe({next:a.updateUploadProgress,error:a.uploadErrorEvent,complete:a.complateUploadEvent})}}})})},News.prototype.updateUploadProgress=function(e){var t=e.total.percent;News.progressGroup.show();var o=$(".progress-bar"),n=t.toFixed(0)+"%";o.css({width:n}),o.text(n)},News.prototype.uploadErrorEvent=function(e){News.progressGroup.hide(),"file type doesn't match with what you specify"===e.message&&window.messageBox.show("上传的文件不匹配")},News.prototype.complateUploadEvent=function(e){News.progressGroup.hide();var t=$(".progress-bar");t.css({width:0}),t.text("0%");var o="http://ps9lpfh8q.bkt.clouddn.com/"+e.key;$("#thumbnail-form").val(o)},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenSumbitEvent=function(){$("#sub-btn").click(function(e){e.preventDefault();var t=$("input[name='title']").val(),o=$("input[name='desc']").val(),n=$("input[name='thumbnail']").val(),i=$("select[name='category']").val(),s=$("input[name='author']").val(),a=window.ue.getContent();xfzajax.post({url:"/cms/add_news/",data:{title:t,desc:o,thumbnail:n,category:i,content:a,author:s},success:function(e){200===e.code&&(window.messageBox.show("发布成功"),setTimeout(function(){window.location.href="http://129.28.158.195:8000/cms/newsList/"},3e3))}})})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsIiQiLCJydW4iLCJwcm9ncmVzc0dyb3VwIiwicHJvdG90eXBlIiwidGhpcyIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsImluaXRVRWRpdG9yIiwibGlzdGVuU3VtYml0RXZlbnQiLCJ1cGxvYWRCdG4iLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmcm9tRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJsaXN0ZW5RblVwbG9hZEZpbGVFdmVudCIsInNlbGYiLCJnZXQiLCJ0b2tlbiIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInNwbGl0IiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejIiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwidXBkYXRlVXBsb2FkUHJvZ3Jlc3MiLCJlcnJvciIsInVwbG9hZEVycm9yRXZlbnQiLCJjb21wbGV0ZSIsImNvbXBsYXRlVXBsb2FkRXZlbnQiLCJyZXNwb25zZSIsInBlcmNlbnQiLCJ0b3RhbCIsInNob3ciLCJwcm9ncmVzc0JhciIsInByb2dyZXNzVGV4dCIsInRvRml4ZWQiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJoaWRlIiwibWVzc2FnZSIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJpbWdVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJkZXNjIiwidGh1bWJuYWlsIiwiY2F0ZWdvcnkiLCJhdXRob3IiLCJjb250ZW50IiwiZ2V0Q29u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UUMsS0FBSyxDQUNUQyxJQUFPLGlCQUNQQyxLQUFRLENBQ0p3RCxNQUFTQSxFQUNUQyxLQUFRQSxFQUNSQyxVQUFjQSxFQUNkQyxTQUFZQSxFQUNaRSxRQUFXQSxFQUNYRCxPQUFVQSxHQUVkekQsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE9BQ2J5QyxPQUFPQyxXQUFXVixLQUFLLFFBRXZCMkIsV0FBVyxXQUFXbEIsT0FBT21CLFNBQVNDLEtBQUssNENBQTZDIiwiZmlsZSI6IndyaXRlX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3cygpIHtcblxufVxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcbiAgIG5ld3MucnVuKCk7XG4gICBOZXdzLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcbn0pO1xuXG5OZXdzLnByb3RvdHlwZS5ydW4gID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHRoaXMubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XG4gICAgdGhpcy5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICB0aGlzLmluaXRVRWRpdG9yKCk7XG4gICAgdGhpcy5saXN0ZW5TdW1iaXRFdmVudCgpO1xuICAgIFxufTtcblxuXG4vLyDkuIrkvKDmlofku7bliLDoh6rlt7HnmoTmnI3liqHlmahcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmcm9tRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmcm9tRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxuICAgICAgICAgICAgJ2RhdGEnOiBmcm9tRGF0YSxcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbEZyb20gPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxGcm9tLnZhbCh1cmwpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9KVxufTtcblxuLy8g5LiK5Lyg5paH5Lu25Yiw5LiD54mb5LqRXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5RblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvcW50b2tlbicsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSArICcuJyArIGZpbGUubmFtZS5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmlofku7blkI1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5blj4LmlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpmZDliLbnmoTmlofku7bnsbvlnotcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsJ3ZpZGVvL3gtbXMtd212JywnaW1hZ2UvanBlZyddXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmmK/lkKbliqDpgJ9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWksei0peWQjuS7juaWsOS4iuS8oOeahOasoeaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4g+eJm+WcsOWMulxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSwga2V5LCB0b2tlbiwgcHV0RXh0cmEsY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5paH5Lu26L+H56iL5Lit5ZGK6K+J5L2g5LiK5Lyg5aSa5bCRXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5leHRcIjpzZWxmLnVwZGF0ZVVwbG9hZFByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5paH5Lu25Ye6546w6ZSZ6K+vXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yXCI6c2VsZi51cGxvYWRFcnJvckV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25LiK5Lyg5oiQ5Yqf55qE5Zue6LCD5Ye95pWwXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBsZXRlXCI6IHNlbGYuY29tcGxhdGVVcGxvYWRFdmVudFxuICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxufTtcblxuTmV3cy5wcm90b3R5cGUudXBkYXRlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyDkuIrkvKDov4fnqIvkuK3lgZrnmoTkuovmg4VcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gTmV3cy5wcm9ncmVzc0dyb3VwO1xuICAgIHByb2dyZXNzR3JvdXAuc2hvdygpO1xuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoJy5wcm9ncmVzcy1iYXInKTtcbiAgICB2YXIgcHJvZ3Jlc3NUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApICsgJyUnO1xuICAgIHByb2dyZXNzQmFyLmNzcyh7J3dpZHRoJzogcHJvZ3Jlc3NUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwcm9ncmVzc1RleHQpO1xuXG59O1xuXG5OZXdzLnByb3RvdHlwZS51cGxvYWRFcnJvckV2ZW50ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdmaWxlIHR5cGUgZG9lc25cXCd0IG1hdGNoIHdpdGggd2hhdCB5b3Ugc3BlY2lmeScpe1xuICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCfkuIrkvKDnmoTmlofku7bkuI3ljLnphY0nKTtcbiAgICB9XG5cbn07XG5cbk5ld3MucHJvdG90eXBlLmNvbXBsYXRlVXBsb2FkRXZlbnQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dCgnMCUnKTtcblxuICAgIHZhciBpbWdVcmwgPSAnaHR0cDovL3BzOWxwZmg4cS5ia3QuY2xvdWRkbi5jb20vJysgcmVzcG9uc2Uua2V5O1xuICAgIHZhciB0aHVtYm5haWxGcm9tID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XG4gICAgdGh1bWJuYWlsRnJvbS52YWwoaW1nVXJsKTtcbn07XG5cbk5ld3MucHJvdG90eXBlLmluaXRVRWRpdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XG4gICAgICAgIC8vIOe8lui+keWZqOmrmOW6plxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxuICAgICAgICAvLyDkvb/nlKjlm77niYfkuIrkvKBcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJ1xuICAgIH0pO1xufTtcblxuXG5cblxuLy8g5Y+R6YCB5paw6Ze7XG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdW1iaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3ViQnRuID0gJCgnI3N1Yi1idG4nKTtcbiAgICBzdWJCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGF1dGhvciA9ICQoXCJpbnB1dFtuYW1lPSdhdXRob3InXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xuXG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9hZGRfbmV3cy8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiAgdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcbiAgICAgICAgICAgICAgICAnYXV0aG9yJzogYXV0aG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygn5Y+R5biD5oiQ5YqfJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovLzEyOS4yOC4xNTguMTk1OjgwMDAvY21zL25ld3NMaXN0L1wiO30sMzAwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG59O1xuXG5cbiJdfQ==
