function Author(){this.scrrolWrapper=$(".scroll-wrapper"),this.index=1,this.maskWrapper=$(".mask-wrapper"),this.signoutGroup=$(".signup-group"),this.sendBtn=$(".sms-captcha-btn")}function Nav(){this.navTable=$(".nav")}Author.prototype.run=function(){this.initSign(),this.listenShow(),this.listenClick(),this.listenSigninEvent(),this.listenImageCaptcha(),this.listenPhoneCodeSend(),this.listenRegisterClick()},Author.prototype.initSign=function(){var n=this;n.scrrolWrapper.css({width:1200});var e=n.scrrolWrapper.children("div").eq(0).clone();n.scrrolWrapper.append(e)},Author.prototype.listenShow=function(){var n=this;$("#login").click(function(){n.maskWrapper.show()}),$("#signin").click(function(){n.scrrolWrapper.css({left:-400}),n.maskWrapper.show()}),$(".close-btn").click(function(){n.maskWrapper.hide()})},Author.prototype.animates=function(){this.scrrolWrapper.animate({left:-400*this.index},500)},Author.prototype.listenClick=function(){var n=this;$(".signup-btn").click(function(){2===n.index&&(n.index=1,n.scrrolWrapper.css({left:0})),n.animates()}),$(".signin-btn").click(function(){n.index++,n.animates()})},Author.prototype.listenSigninEvent=function(){var n=$(".signin-group"),o=n.find("input[name='telephone']"),i=n.find("input[name='password']"),s=n.find("input[name='remember']");n.find(".submit-btn").click(function(){var n=o.val(),e=i.val(),t=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:e,remember:t?0:1},success:function(n){if(200===n.code)$(".mask-wrapper").hide(),window.location.reload();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}})})},Author.prototype.listenImageCaptcha=function(){image=$(".image_captcha"),image.click(function(){image.attr("src","/account/image/?random"+Math.random())})},Author.prototype.smsSuccessEvent=function(){var n=this;n.sendBtn.addClass("disabled");var e=60;n.sendBtn.unbind("click");var t=setInterval(function(){n.sendBtn.text(e+"s再次点击"),--e<0&&(clearInterval(t),n.sendBtn.removeClass("disabled"),n.sendBtn.text("发送验证码"),n.listenPhoneCodeSend())},1e3)},Author.prototype.listenPhoneCodeSend=function(){var i=this,e=i.signoutGroup.find("input[name='telephone']");i.sendBtn.click(function(){var n=e.val();n?/^1[3|4|5|7|8][0-9]\d{8}$/.test(n)?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:n},success:function(n){if(200===n.code)window.messageBox.show("短信发送成功"),i.smsSuccessEvent();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}}):window.messageBox.show("不是正确的手机号码"):window.messageBox.show("请输入手机号码")})},Author.prototype.listenRegisterClick=function(){console.log("注册~~~~~~~~~~");var n=this,a=n.signoutGroup.find("input[name='telephone']"),r=n.signoutGroup.find("input[name='username']"),c=n.signoutGroup.find("input[name='img_captcha']"),p=n.signoutGroup.find("input[name='password1']"),l=n.signoutGroup.find("input[name='password2']"),u=n.signoutGroup.find("input[name='sms_captcha']");n.signoutGroup.find(".submit-btn").click(function(){console.log("register button");var n=a.val(),e=r.val(),t=c.val(),o=p.val(),i=l.val(),s=u.val();console.log(n),xfzajax.post({url:"/account/register/",data:{telephone:n,password1:o,password2:i,username:e,img_captcha:t,sms_captcha:s},success:function(n){if(200===n.code)$(".mask-wrapper").hide(),window.location.reload();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}})})},Nav.prototype.run=function(){this.listenNavClick()},Nav.prototype.navColor=function(n){this.navTable.children("li").eq(n).addClass("active").siblings().removeClass("active")},Nav.prototype.listenNavClick=function(){var n=0,e=window.location.pathname;"/news/index/"==e?n=0:"/course/index/"===e?n=1:"/payinfo/index/"===e?n=2:"/news/search/"===e&&(n=3),this.navColor(n)},$(function(){var n=new Author;(new Nav).run(),n.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiQXV0aG9yIiwidGhpcyIsInNjcnJvbFdyYXBwZXIiLCIkIiwiaW5kZXgiLCJtYXNrV3JhcHBlciIsInNpZ25vdXRHcm91cCIsInNlbmRCdG4iLCJOYXYiLCJuYXZUYWJsZSIsInByb3RvdHlwZSIsInJ1biIsImluaXRTaWduIiwibGlzdGVuU2hvdyIsImxpc3RlbkNsaWNrIiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWFnZUNhcHRjaGEiLCJsaXN0ZW5QaG9uZUNvZGVTZW5kIiwibGlzdGVuUmVnaXN0ZXJDbGljayIsInNlbGYiLCJjc3MiLCJ3aWR0aCIsImZpcnN0RGl2IiwiY2hpbGRyZW4iLCJlcSIsImNsb25lIiwiYXBwZW5kIiwiY2xpY2siLCJzaG93IiwibGVmdCIsImhpZGUiLCJhbmltYXRlcyIsImFuaW1hdGUiLCJzaWduaW5Hcm91cCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlT2JqZWN0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlQm94Iiwia2V5IiwibWVzc2FnZSIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpbWFnZSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2Vzc0V2ZW50IiwiYWRkQ2xhc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwidGVzdCIsImdldCIsInVzZXJuYW1lSW5wdXQiLCJpbWdfY2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc19jYXB0Y2hhSW5wdXQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJsaXN0ZW5OYXZDbGljayIsIm5hdkNvbG9yIiwic2libGluZ3MiLCJwYXRobmFtZSIsImF1dGhvciJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsU0FDTEMsS0FBS0MsY0FBZ0JDLEVBQUUsbUJBQ3ZCRixLQUFLRyxNQUFRLEVBQ2JILEtBQUtJLFlBQWNGLEVBQUUsaUJBQ3JCRixLQUFLSyxhQUFlSCxFQUFFLGlCQUN0QkYsS0FBS00sUUFBVUosRUFBRSxvQkF1UHJCLFNBQVNLLE1BQ0xQLEtBQUtRLFNBQVdOLEVBQUUsUUFoUHRCSCxPQUFPVSxVQUFVQyxJQUFNLFdBQ25CVixLQUFLVyxXQUNMWCxLQUFLWSxhQUNMWixLQUFLYSxjQUNMYixLQUFLYyxvQkFDTGQsS0FBS2UscUJBQ0xmLEtBQUtnQixzQkFDTGhCLEtBQUtpQix1QkFHVGxCLE9BQU9VLFVBQVVFLFNBQVcsV0FDeEIsSUFBSU8sRUFBT2xCLEtBQ1hrQixFQUFLakIsY0FBY2tCLElBQUksQ0FBQ0MsTUFBUyxPQUNqQyxJQUFJQyxFQUFXSCxFQUFLakIsY0FBY3FCLFNBQVMsT0FBT0MsR0FBRyxHQUFHQyxRQUN4RE4sRUFBS2pCLGNBQWN3QixPQUFPSixJQUk5QnRCLE9BQU9VLFVBQVVHLFdBQWEsV0FDMUIsSUFBSU0sRUFBT2xCLEtBQ1hFLEVBQUUsVUFBVXdCLE1BQU0sV0FDZFIsRUFBS2QsWUFBWXVCLFNBRXJCekIsRUFBRSxXQUFXd0IsTUFBTSxXQUNmUixFQUFLakIsY0FBY2tCLElBQUksQ0FBQ1MsTUFBUyxNQUNqQ1YsRUFBS2QsWUFBWXVCLFNBRXJCekIsRUFBRSxjQUFjd0IsTUFBTSxXQUNsQlIsRUFBS2QsWUFBWXlCLFVBSXpCOUIsT0FBT1UsVUFBVXFCLFNBQVcsV0FDYjlCLEtBQ05DLGNBQWM4QixRQUFRLENBQUNILE1BQVMsSUFEMUI1QixLQUNvQ0csT0FBUSxNQUczREos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QVU2RSxTQUFXLFNBQVNuRixHQUNuQkgsS0FDTlEsU0FBU2MsU0FBUyxNQUFNQyxHQUFHcEIsR0FBTzhELFNBQVMsVUFBVXNCLFdBQVdmLFlBQVksV0FHckZqRSxJQUFJRSxVQUFVNEUsZUFBaUIsV0FDM0IsSUFDSWxGLEVBQVEsRUFDUnlDLEVBQU1JLE9BQU9DLFNBQVN1QyxTQUNmLGdCQUFQNUMsRUFDQXpDLEVBQVEsRUFDTyxtQkFBUnlDLEVBQ1B6QyxFQUFRLEVBQ08sb0JBQVJ5QyxFQUNQekMsRUFBUSxFQUNPLGtCQUFSeUMsSUFDUHpDLEVBQVEsR0FWREgsS0FZTnNGLFNBQVNuRixJQUtsQkQsRUFBRSxXQUNFLElBQUl1RixFQUFTLElBQUkxRixRQUNQLElBQUlRLEtBQ1ZHLE1BQ0orRSxFQUFPL0UiLCJmaWxlIjoiYXV0aC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmZ1bmN0aW9uIEF1dGhvcigpIHtcbiAgICB0aGlzLnNjcnJvbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xuICAgIHRoaXMuc2lnbm91dEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xuICAgIHRoaXMuc2VuZEJ0biA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcblxuXG5cblxuICAgIFxufVxuXG5BdXRob3IucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmluaXRTaWduKCk7XG4gICAgdGhpcy5saXN0ZW5TaG93KCk7XG4gICAgdGhpcy5saXN0ZW5DbGljaygpO1xuICAgIHRoaXMubGlzdGVuU2lnbmluRXZlbnQoKTtcbiAgICB0aGlzLmxpc3RlbkltYWdlQ2FwdGNoYSgpO1xuICAgIHRoaXMubGlzdGVuUGhvbmVDb2RlU2VuZCgpO1xuICAgIHRoaXMubGlzdGVuUmVnaXN0ZXJDbGljaygpXG59O1xuXG5BdXRob3IucHJvdG90eXBlLmluaXRTaWduID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5zY3Jyb2xXcmFwcGVyLmNzcyh7J3dpZHRoJzogMTIwMH0pO1xuICAgIHZhciBmaXJzdERpdiA9IHNlbGYuc2Nycm9sV3JhcHBlci5jaGlsZHJlbignZGl2JykuZXEoMCkuY2xvbmUoKTtcbiAgICBzZWxmLnNjcnJvbFdyYXBwZXIuYXBwZW5kKGZpcnN0RGl2KTtcblxufTtcblxuQXV0aG9yLnByb3RvdHlwZS5saXN0ZW5TaG93ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgJCgnI2xvZ2luJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1hc2tXcmFwcGVyLnNob3coKTtcbiAgICB9KTtcbiAgICAkKCcjc2lnbmluJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnNjcnJvbFdyYXBwZXIuY3NzKHsnbGVmdCc6IC00MDB9KTtcbiAgICAgICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XG4gICAgfSk7XG4gICAgJCgnLmNsb3NlLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XG4gICAgfSk7XG59O1xuXG5BdXRob3IucHJvdG90eXBlLmFuaW1hdGVzID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5zY3Jyb2xXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzogLTQwMCogc2VsZi5pbmRleH0sIDUwMCk7XG59O1xuXG5BdXRob3IucHJvdG90eXBlLmxpc3RlbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgJCgnLnNpZ251cC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSAyKXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAxO1xuICAgICAgICAgICAgc2VsZi5zY3Jyb2xXcmFwcGVyLmNzcyh7J2xlZnQnOiAwfSlcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGVzKCk7XG5cblxuICAgIH0pO1xuICAgICQoJy5zaWduaW4tYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIHNlbGYuYW5pbWF0ZXMoKTtcbiAgICB9KTtcbn07XG5cbkF1dGhvci5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XG5cbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKCdjaGVja2VkJyk7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzogcmVtZW1iZXI/MDoxLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yi35paw6aG16Z2iXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gcmVzdWx0WydtZXNzYWdlJ107XG4gICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5LiN5piv5a2X56ym5LiyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSBcInN0cmluZ1wiIHx8IG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3IgPT0gJ1N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cocmVzdWx0WydtZXNzYWdlJ10pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG59O1xuXG5BdXRob3IucHJvdG90eXBlLmxpc3RlbkltYWdlQ2FwdGNoYSA9IGZ1bmN0aW9uKCl7XG4gICAgaW1hZ2UgPSAkKCcuaW1hZ2VfY2FwdGNoYScpO1xuXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWFnZS5hdHRyKFwic3JjXCIsICcvYWNjb3VudC9pbWFnZS8nICsgJz9yYW5kb20nICsgTWF0aC5yYW5kb20oKSlcbiAgICB9KVxufTtcblxuQXV0aG9yLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnNlbmRCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgdmFyIGNvdW50ID0gNjA7XG4gICAgLy8g5Y+W5raI54K55Ye75LqL5oOFXG4gICAgc2VsZi5zZW5kQnRuLnVuYmluZCgnY2xpY2snKTtcbiAgICB2YXIgdGltZXIgPXNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zZW5kQnRuLnRleHQoY291bnQgKyAnc+WGjeasoeeCueWHuycpO1xuICAgICAgICBjb3VudC0tO1xuICAgICAgICBpZiAoY291bnQgPCAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgIHNlbGYuc2VuZEJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIHNlbGYuc2VuZEJ0bi50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcbiAgICAgICAgICAgIHNlbGYubGlzdGVuUGhvbmVDb2RlU2VuZCgpO1xuICAgICAgICB9XG4gICAgfSwgMTAwMClcblxufTtcblxuQXV0aG9yLnByb3RvdHlwZS5saXN0ZW5QaG9uZUNvZGVTZW5kID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG5cblxuICAgIHNlbGYuc2VuZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coXCLor7fovpPlhaXmiYvmnLrlj7fnoIFcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoISgvXjFbM3w0fDV8N3w4XVswLTldXFxkezh9JC8udGVzdCh0ZWxlcGhvbmUpKSl7XG4gICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhcIuS4jeaYr+ato+ehrueahOaJi+acuuWPt+eggVwiKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygn55+t5L+h5Y+R6YCB5oiQ5YqfJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3mmK/kuI3mmK/lrZfnrKbkuLJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlT2JqZWN0ID09IFwic3RyaW5nXCIgfHwgbWVzc2FnZU9iamVjdC5jb25zdHJ1Y3RvciA9PSAnU3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhyZXN1bHRbJ21lc3NhZ2UnXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWVzc2FnZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pXG59O1xuXG5cbkF1dGhvci5wcm90b3R5cGUubGlzdGVuUmVnaXN0ZXJDbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgY29uc29sZS5sb2coJ+azqOWGjH5+fn5+fn5+fn4nKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2VsZi5zaWdub3V0R3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xuICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2VsZi5zaWdub3V0R3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XG4gICAgdmFyIGltZ19jYXB0Y2hhSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcbiAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2VsZi5zaWdub3V0R3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMiddXCIpO1xuICAgIHZhciBzbXNfY2FwdGNoYUlucHV0ID0gc2VsZi5zaWdub3V0R3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XG4gICAgdmFyIHJlZ2lzdGVyU3VibWl0ID0gc2VsZi5zaWdub3V0R3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcblxuICAgIHJlZ2lzdGVyU3VibWl0LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyIGJ1dHRvbicpO1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ19jYXB0Y2hhSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNfY2FwdGNoYUlucHV0LnZhbCgpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHRlbGVwaG9uZSk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3JlZ2lzdGVyLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAnaW1nX2NhcHRjaGEnOiBpbWdfY2FwdGNoYSxcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tYXNrLXdyYXBwZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWIt+aWsOmhtemdolxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xuICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreaYr+S4jeaYr+Wtl+espuS4slxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2VPYmplY3QgPT0gXCJzdHJpbmdcIiB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09ICdTdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KHJlc3VsdFsnbWVzc2FnZSddKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gbWVzc2FnZU9iamVjdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfSlcbn07XG5cblxuZnVuY3Rpb24gTmF2KCl7XG4gICAgdGhpcy5uYXZUYWJsZSA9ICQoJy5uYXYnKTtcblxufTtcblxuTmF2LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xuICAgIHRoaXMubGlzdGVuTmF2Q2xpY2soKTtcbn07XG5cbk5hdi5wcm90b3R5cGUubmF2Q29sb3IgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubmF2VGFibGUuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxufTtcblxuTmF2LnByb3RvdHlwZS5saXN0ZW5OYXZDbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICBpZiAodXJsID09ICcvbmV3cy9pbmRleC8nKXtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgIH0gZWxzZSBpZiAodXJsID09PSAnL2NvdXJzZS9pbmRleC8nKSB7XG4gICAgICAgIGluZGV4ID0gMTtcbiAgICB9IGVsc2UgaWYgKHVybCA9PT0gJy9wYXlpbmZvL2luZGV4LycpIHtcbiAgICAgICAgaW5kZXggPSAyO1xuICAgIH0gZWxzZSBpZiAodXJsID09PSAnL25ld3Mvc2VhcmNoLycpIHtcbiAgICAgICAgaW5kZXggPSAzO1xuICAgIH1cbiAgICBzZWxmLm5hdkNvbG9yKGluZGV4KTtcbn07XG5cblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXV0aG9yID0gbmV3IEF1dGhvcigpO1xuICAgIHZhciBuYXYgPSBuZXcgTmF2KCk7XG4gICAgbmF2LnJ1bigpO1xuICAgIGF1dGhvci5ydW4oKTtcblxufSk7XG4iXX0=
