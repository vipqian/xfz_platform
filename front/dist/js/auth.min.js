function Author(){this.scrrolWrapper=$(".scroll-wrapper"),this.index=1,this.maskWrapper=$(".mask-wrapper"),this.signoutGroup=$(".signup-group"),this.sendBtn=$(".sms-captcha-btn")}function Nav(){this.navTable=$(".nav")}Author.prototype.run=function(){this.initSign(),this.listenShow(),this.listenClick(),this.listenSigninEvent(),this.listenImageCaptcha(),this.listenPhoneCodeSend(),this.listenRegisterClick()},Author.prototype.initSign=function(){var n=this;n.scrrolWrapper.css({width:1200});var e=n.scrrolWrapper.children("div").eq(0).clone();n.scrrolWrapper.append(e)},Author.prototype.listenShow=function(){var n=this;$("#login").click(function(){n.maskWrapper.show()}),$("#signin").click(function(){n.scrrolWrapper.css({left:-400}),n.maskWrapper.show()}),$(".close-btn").click(function(){n.maskWrapper.hide()})},Author.prototype.animates=function(){this.scrrolWrapper.animate({left:-400*this.index},500)},Author.prototype.listenClick=function(){var n=this;$(".signup-btn").click(function(){2===n.index&&(n.index=1,n.scrrolWrapper.css({left:0})),n.animates()}),$(".signin-btn").click(function(){n.index++,n.animates()})},Author.prototype.listenSigninEvent=function(){var n=$(".signin-group"),o=n.find("input[name='telephone']"),i=n.find("input[name='password']"),s=n.find("input[name='remember']");n.find(".submit-btn").click(function(){var n=o.val(),e=i.val(),t=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:e,remember:t?0:1},success:function(n){if(200===n.code)$(".mask-wrapper").hide(),window.location.reload();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}})})},Author.prototype.listenImageCaptcha=function(){image=$(".image_captcha"),image.click(function(){image.attr("src","/account/image/?random"+Math.random())})},Author.prototype.smsSuccessEvent=function(){var n=this;n.sendBtn.addClass("disabled");var e=60;n.sendBtn.unbind("click");var t=setInterval(function(){n.sendBtn.text(e+"s再次点击"),--e<0&&(clearInterval(t),n.sendBtn.removeClass("disabled"),n.sendBtn.text("发送验证码"),n.listenPhoneCodeSend())},1e3)},Author.prototype.listenPhoneCodeSend=function(){var i=this,e=i.signoutGroup.find("input[name='telephone']");i.sendBtn.click(function(){var n=e.val();n?/^1[3|4|5|7|8][0-9]\d{8}$/.test(n)?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:n},success:function(n){if(200===n.code)window.messageBox.show("短信发送成功"),i.smsSuccessEvent();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}}):window.messageBox.show("不是正确的手机号码"):window.messageBox.show("请输入手机号码")})},Author.prototype.listenRegisterClick=function(){console.log("注册~~~~~~~~~~");var n=this,a=n.signoutGroup.find("input[name='telephone']"),r=n.signoutGroup.find("input[name='username']"),c=n.signoutGroup.find("input[name='img_captcha']"),p=n.signoutGroup.find("input[name='password1']"),l=n.signoutGroup.find("input[name='password2']"),u=n.signoutGroup.find("input[name='sms_captcha']");n.signoutGroup.find(".submit-btn").click(function(){console.log("register button");var n=a.val(),e=r.val(),t=c.val(),o=p.val(),i=l.val(),s=u.val();console.log(n),xfzajax.post({url:"/account/register/",data:{telephone:n,password1:o,password2:i,username:e,img_captcha:t,sms_captcha:s},success:function(n){if(200===n.code)$(".mask-wrapper").hide(),window.location.reload();else{var e=n.message;if("string"==typeof e||"String"==e.constructor)window.messageBox.show(n.message);else for(var t in e){var o=e[t][0];window.messageBox.show(o)}}},fail:function(n){console.log(n)}})})},Nav.prototype.run=function(){this.listenNavClick()},Nav.prototype.navColor=function(n){this.navTable.children("li").eq(n).addClass("active").siblings().removeClass("active")},Nav.prototype.listenNavClick=function(){var n=0,e=window.location.pathname;"/news/index/"==e?n=0:"/course/index/"===e?n=1:"/payinfo/index/"===e?n=2:"/news/search/"===e&&(n=3),this.navColor(n)},$(function(){var n=new Author;(new Nav).run(),n.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiQXV0aG9yIiwidGhpcyIsInNjcnJvbFdyYXBwZXIiLCIkIiwiaW5kZXgiLCJtYXNrV3JhcHBlciIsInNpZ25vdXRHcm91cCIsInNlbmRCdG4iLCJOYXYiLCJuYXZUYWJsZSIsInByb3RvdHlwZSIsInJ1biIsImluaXRTaWduIiwibGlzdGVuU2hvdyIsImxpc3RlbkNsaWNrIiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWFnZUNhcHRjaGEiLCJsaXN0ZW5QaG9uZUNvZGVTZW5kIiwibGlzdGVuUmVnaXN0ZXJDbGljayIsInNlbGYiLCJjc3MiLCJ3aWR0aCIsImZpcnN0RGl2IiwiY2hpbGRyZW4iLCJlcSIsImNsb25lIiwiYXBwZW5kIiwiY2xpY2siLCJzaG93IiwibGVmdCIsImhpZGUiLCJhbmltYXRlcyIsImFuaW1hdGUiLCJzaWduaW5Hcm91cCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlT2JqZWN0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlQm94Iiwia2V5IiwibWVzc2FnZSIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpbWFnZSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2Vzc0V2ZW50IiwiYWRkQ2xhc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwidGVzdCIsImdldCIsInVzZXJuYW1lSW5wdXQiLCJpbWdfY2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc19jYXB0Y2hhSW5wdXQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJsaXN0ZW5OYXZDbGljayIsIm5hdkNvbG9yIiwic2libGluZ3MiLCJwYXRobmFtZSIsImF1dGhvciJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsU0FDTEMsS0FBS0MsY0FBZ0JDLEVBQUUsbUJBQ3ZCRixLQUFLRyxNQUFRLEVBQ2JILEtBQUtJLFlBQWNGLEVBQUUsaUJBQ3JCRixLQUFLSyxhQUFlSCxFQUFFLGlCQUN0QkYsS0FBS00sUUFBVUosRUFBRSxvQkFxUHJCLFNBQVNLLE1BQ0xQLEtBQUtRLFNBQVdOLEVBQUUsUUFoUHRCSCxPQUFPVSxVQUFVQyxJQUFNLFdBQ25CVixLQUFLVyxXQUNMWCxLQUFLWSxhQUNMWixLQUFLYSxjQUNMYixLQUFLYyxvQkFDTGQsS0FBS2UscUJBQ0xmLEtBQUtnQixzQkFDTGhCLEtBQUtpQix1QkFHVGxCLE9BQU9VLFVBQVVFLFNBQVcsV0FDeEIsSUFBSU8sRUFBT2xCLEtBQ1hrQixFQUFLakIsY0FBY2tCLElBQUksQ0FBQ0MsTUFBUyxPQUNqQyxJQUFJQyxFQUFXSCxFQUFLakIsY0FBY3FCLFNBQVMsT0FBT0MsR0FBRyxHQUFHQyxRQUN4RE4sRUFBS2pCLGNBQWN3QixPQUFPSixJQUk5QnRCLE9BQU9VLFVBQVVHLFdBQWEsV0FDMUIsSUFBSU0sRUFBT2xCLEtBQ1hFLEVBQUUsVUFBVXdCLE1BQU0sV0FDZFIsRUFBS2QsWUFBWXVCLFNBRXJCekIsRUFBRSxXQUFXd0IsTUFBTSxXQUNmUixFQUFLakIsY0FBY2tCLElBQUksQ0FBQ1MsTUFBUyxNQUNqQ1YsRUFBS2QsWUFBWXVCLFNBRXJCekIsRUFBRSxjQUFjd0IsTUFBTSxXQUNsQlIsRUFBS2QsWUFBWXlCLFVBSXpCOUIsT0FBT1UsVUFBVXFCLFNBQVcsV0FDYjlCLEtBQ05DLGNBQWM4QixRQUFRLENBQUNILE1BQVMsSUFEMUI1QixLQUNvQ0csT0FBUSxNQUczREos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QVU2RSxTQUFXLFNBQVNuRixHQUNuQkgsS0FDTlEsU0FBU2MsU0FBUyxNQUFNQyxHQUFHcEIsR0FBTzhELFNBQVMsVUFBVXNCLFdBQVdmLFlBQVksV0FHckZqRSxJQUFJRSxVQUFVNEUsZUFBaUIsV0FDM0IsSUFDSWxGLEVBQVEsRUFDUnlDLEVBQU1JLE9BQU9DLFNBQVN1QyxTQUNmLGdCQUFQNUMsRUFDQXpDLEVBQVEsRUFDTyxtQkFBUnlDLEVBQ1B6QyxFQUFRLEVBQ08sb0JBQVJ5QyxFQUNQekMsRUFBUSxFQUNPLGtCQUFSeUMsSUFDUHpDLEVBQVEsR0FWREgsS0FZTnNGLFNBQVNuRixJQUtsQkQsRUFBRSxXQUNFLElBQUl1RixFQUFTLElBQUkxRixRQUNQLElBQUlRLEtBQ1ZHLE1BQ0orRSxFQUFPL0UiLCJmaWxlIjoiYXV0aC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmZ1bmN0aW9uIEF1dGhvcigpIHtcbiAgICB0aGlzLnNjcnJvbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xuICAgIHRoaXMuc2lnbm91dEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xuICAgIHRoaXMuc2VuZEJ0biA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcblxuXG4gICAgXG59XG5cbkF1dGhvci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW5pdFNpZ24oKTtcbiAgICB0aGlzLmxpc3RlblNob3coKTtcbiAgICB0aGlzLmxpc3RlbkNsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5TaWduaW5FdmVudCgpO1xuICAgIHRoaXMubGlzdGVuSW1hZ2VDYXB0Y2hhKCk7XG4gICAgdGhpcy5saXN0ZW5QaG9uZUNvZGVTZW5kKCk7XG4gICAgdGhpcy5saXN0ZW5SZWdpc3RlckNsaWNrKClcbn07XG5cbkF1dGhvci5wcm90b3R5cGUuaW5pdFNpZ24gPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnNjcnJvbFdyYXBwZXIuY3NzKHsnd2lkdGgnOiAxMjAwfSk7XG4gICAgdmFyIGZpcnN0RGl2ID0gc2VsZi5zY3Jyb2xXcmFwcGVyLmNoaWxkcmVuKCdkaXYnKS5lcSgwKS5jbG9uZSgpO1xuICAgIHNlbGYuc2Nycm9sV3JhcHBlci5hcHBlbmQoZmlyc3REaXYpO1xuXG59O1xuXG5BdXRob3IucHJvdG90eXBlLmxpc3RlblNob3cgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAkKCcjbG9naW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xuICAgIH0pO1xuICAgICQoJyNzaWduaW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2Nycm9sV3JhcHBlci5jc3MoeydsZWZ0JzogLTQwMH0pO1xuICAgICAgICBzZWxmLm1hc2tXcmFwcGVyLnNob3coKTtcbiAgICB9KTtcbiAgICAkKCcuY2xvc2UtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKTtcbiAgICB9KTtcbn07XG5cbkF1dGhvci5wcm90b3R5cGUuYW5pbWF0ZXMgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnNjcnJvbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOiAtNDAwKiBzZWxmLmluZGV4fSwgNTAwKTtcbn07XG5cbkF1dGhvci5wcm90b3R5cGUubGlzdGVuQ2xpY2sgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAkKCcuc2lnbnVwLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDIpe1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDE7XG4gICAgICAgICAgICBzZWxmLnNjcnJvbFdyYXBwZXIuY3NzKHsnbGVmdCc6IDB9KVxuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZXMoKTtcblxuXG4gICAgfSk7XG4gICAgJCgnLnNpZ25pbi1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgc2VsZi5hbmltYXRlcygpO1xuICAgIH0pO1xufTtcblxuQXV0aG9yLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNpZ25pbkdyb3VwID0gJCgnLnNpZ25pbi1ncm91cCcpO1xuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIik7XG5cbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbmluR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcblxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoJ2NoZWNrZWQnKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlcj8wOjEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICAkKCcubWFzay13cmFwcGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyDliLfmlrDpobXpnaJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3mmK/kuI3mmK/lrZfnrKbkuLJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlT2JqZWN0ID09IFwic3RyaW5nXCIgfHwgbWVzc2FnZU9iamVjdC5jb25zdHJ1Y3RvciA9PSAnU3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhyZXN1bHRbJ21lc3NhZ2UnXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWVzc2FnZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn07XG5cbkF1dGhvci5wcm90b3R5cGUubGlzdGVuSW1hZ2VDYXB0Y2hhID0gZnVuY3Rpb24oKXtcbiAgICBpbWFnZSA9ICQoJy5pbWFnZV9jYXB0Y2hhJyk7XG5cbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGltYWdlLmF0dHIoXCJzcmNcIiwgJy9hY2NvdW50L2ltYWdlLycgKyAnP3JhbmRvbScgKyBNYXRoLnJhbmRvbSgpKVxuICAgIH0pXG59O1xuXG5BdXRob3IucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuc2VuZEJ0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB2YXIgY291bnQgPSA2MDtcbiAgICAvLyDlj5bmtojngrnlh7vkuovmg4VcbiAgICBzZWxmLnNlbmRCdG4udW5iaW5kKCdjbGljaycpO1xuICAgIHZhciB0aW1lciA9c2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnNlbmRCdG4udGV4dChjb3VudCArICdz5YaN5qyh54K55Ye7Jyk7XG4gICAgICAgIGNvdW50LS07XG4gICAgICAgIGlmIChjb3VudCA8IDApIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgICAgc2VsZi5zZW5kQnRuLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgc2VsZi5zZW5kQnRuLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xuICAgICAgICAgICAgc2VsZi5saXN0ZW5QaG9uZUNvZGVTZW5kKCk7XG4gICAgICAgIH1cbiAgICB9LCAxMDAwKVxuXG59O1xuXG5BdXRob3IucHJvdG90eXBlLmxpc3RlblBob25lQ29kZVNlbmQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNlbGYuc2lnbm91dEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcblxuXG4gICAgc2VsZi5zZW5kQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICBpZiAoIXRlbGVwaG9uZSkge1xuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhcIuivt+i+k+WFpeaJi+acuuWPt+eggVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghKC9eMVszfDR8NXw3fDhdWzAtOV1cXGR7OH0kLy50ZXN0KHRlbGVwaG9uZSkpKXtcbiAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KFwi5LiN5piv5q2j56Gu55qE5omL5py65Y+356CBXCIpO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCfnn63kv6Hlj5HpgIHmiJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xuICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreaYr+S4jeaYr+Wtl+espuS4slxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2VPYmplY3QgPT0gXCJzdHJpbmdcIiB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09ICdTdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KHJlc3VsdFsnbWVzc2FnZSddKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gbWVzc2FnZU9iamVjdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSlcbn07XG5cblxuQXV0aG9yLnByb3RvdHlwZS5saXN0ZW5SZWdpc3RlckNsaWNrID0gZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZygn5rOo5YaMfn5+fn5+fn5+ficpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcbiAgICB2YXIgaW1nX2NhcHRjaGFJbnB1dCA9IHNlbGYuc2lnbm91dEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWdfY2FwdGNoYSddXCIpO1xuICAgIHZhciBwYXNzd29yZDFJbnB1dCA9IHNlbGYuc2lnbm91dEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDEnXVwiKTtcbiAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XG4gICAgdmFyIHNtc19jYXB0Y2hhSW5wdXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcbiAgICB2YXIgcmVnaXN0ZXJTdWJtaXQgPSBzZWxmLnNpZ25vdXRHcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xuXG4gICAgcmVnaXN0ZXJTdWJtaXQuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXIgYnV0dG9uJyk7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nX2NhcHRjaGFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQyID0gcGFzc3dvcmQySW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc19jYXB0Y2hhSW5wdXQudmFsKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2codGVsZXBob25lKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yi35paw6aG16Z2iXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gcmVzdWx0WydtZXNzYWdlJ107XG4gICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5piv5LiN5piv5a2X56ym5LiyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSBcInN0cmluZ1wiIHx8IG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3IgPT0gJ1N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cocmVzdWx0WydtZXNzYWdlJ10pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9KVxufTtcblxuXG5mdW5jdGlvbiBOYXYoKXtcbiAgICB0aGlzLm5hdlRhYmxlID0gJCgnLm5hdicpO1xuXG59O1xuXG5OYXYucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5saXN0ZW5OYXZDbGljaygpO1xufTtcblxuTmF2LnByb3RvdHlwZS5uYXZDb2xvciA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5uYXZUYWJsZS5jaGlsZHJlbignbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG59O1xuXG5OYXYucHJvdG90eXBlLmxpc3Rlbk5hdkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgIGlmICh1cmwgPT0gJy9uZXdzL2luZGV4Lycpe1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgfSBlbHNlIGlmICh1cmwgPT09ICcvY291cnNlL2luZGV4LycpIHtcbiAgICAgICAgaW5kZXggPSAxO1xuICAgIH0gZWxzZSBpZiAodXJsID09PSAnL3BheWluZm8vaW5kZXgvJykge1xuICAgICAgICBpbmRleCA9IDI7XG4gICAgfSBlbHNlIGlmICh1cmwgPT09ICcvbmV3cy9zZWFyY2gvJykge1xuICAgICAgICBpbmRleCA9IDM7XG4gICAgfVxuICAgIHNlbGYubmF2Q29sb3IoaW5kZXgpO1xufTtcblxuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRob3IgPSBuZXcgQXV0aG9yKCk7XG4gICAgdmFyIG5hdiA9IG5ldyBOYXYoKTtcbiAgICBuYXYucnVuKCk7XG4gICAgYXV0aG9yLnJ1bigpO1xuXG59KTsiXX0=
