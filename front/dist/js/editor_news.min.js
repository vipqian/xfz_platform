function EditorNews(){}EditorNews.prototype.run=function(){this.listenSumbitEvent(),this.listenQnUploadFileEvent()},EditorNews.prototype.listenQnUploadFileEvent=function(){var s=this,t=$("#thumbnail-btn");t.change(function(){var r=t[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(t){if(200===t.code){var e=t.data.token,o=(new Date).getTime()+"."+r.name.split(".")[1],n={fname:o,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(r,o,e,n,i).subscribe({next:s.updateUploadProgress,error:s.uploadErrorEvent,complete:s.complateUploadEvent})}}})})},EditorNews.prototype.updateUploadProgress=function(t){var e=t.total.percent;EditorNews.progressGroup.show();var o=$(".progress-bar"),n=e.toFixed(0)+"%";o.css({width:n}),o.text(n)},EditorNews.prototype.uploadErrorEvent=function(t){EditorNews.progressGroup.hide(),"file type doesn't match with what you specify"===t.message&&window.messageBox.show("上传的文件不匹配")},EditorNews.prototype.complateUploadEvent=function(t){EditorNews.progressGroup.hide();var e=$(".progress-bar");e.css({width:0}),e.text("0%");var o="http://ps9lpfh8q.bkt.clouddn.com/"+t.key;$("#thumbnail-form").val(o)},EditorNews.prototype.listenSumbitEvent=function(){var p=$("#sub-btn");p.click(function(t){t.preventDefault();var e=p.attr("data-news-id"),o=$("input[name='title']").val(),n=$("input[name='desc']").val(),i=$("input[name='thumbnail']").val(),r=$("select[name='category']").val(),s=$("input[name='author']").val(),a=window.ue.getContent();xfzajax.post({url:"/cms/editor_news/",data:{news_id:e,title:o,desc:n,thumbnail:i,category:r,content:a,author:s},success:function(t){200===t.code&&(window.messageBox.show("编辑成功"),setTimeout(function(){window.location.href="http://129.28.158.195:8000/cms/newsList/"},3e3))}})})},$(function(){(new EditorNews).run(),EditorNews.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRvcl9uZXdzLmpzIl0sIm5hbWVzIjpbIkVkaXRvck5ld3MiLCJwcm90b3R5cGUiLCJydW4iLCJ0aGlzIiwibGlzdGVuU3VtYml0RXZlbnQiLCJsaXN0ZW5RblVwbG9hZEZpbGVFdmVudCIsInNlbGYiLCJ1cGxvYWRCdG4iLCIkIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwieGZ6YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0b2tlbiIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInNwbGl0IiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejIiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwidXBkYXRlVXBsb2FkUHJvZ3Jlc3MiLCJlcnJvciIsInVwbG9hZEVycm9yRXZlbnQiLCJjb21wbGV0ZSIsImNvbXBsYXRlVXBsb2FkRXZlbnQiLCJyZXNwb25zZSIsInBlcmNlbnQiLCJ0b3RhbCIsInByb2dyZXNzR3JvdXAiLCJzaG93IiwicHJvZ3Jlc3NCYXIiLCJwcm9ncmVzc1RleHQiLCJ0b0ZpeGVkIiwiY3NzIiwid2lkdGgiLCJ0ZXh0IiwiaGlkZSIsIm1lc3NhZ2UiLCJ3aW5kb3ciLCJtZXNzYWdlQm94IiwiaW1nVXJsIiwidmFsIiwic3ViQnRuIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwibmV3c19pZCIsImF0dHIiLCJ0aXRsZSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjYXRlZ29yeSIsImF1dGhvciIsImNvbnRlbnQiLCJ1ZSIsImdldENvbnRlbnQiLCJwb3N0IiwiZGF0YSIsInNldFRpbWVvdXQiLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLGNBSVRBLFdBQVdDLFVBQVVDLElBQU0sV0FDdkJDLEtBQUtDLG9CQUNMRCxLQUFLRSwyQkFLVEwsV0FBV0MsVUFBVUksd0JBQTBCLFdBQzNDLElBQUlDLEVBQU9ILEtBQ1BJLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzlCQyxRQUFRQyxJQUFJLENBQ1JDLElBQU8sZUFDUEMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFVLENBQ3ZCLElBQUlDLEVBQVFELEVBQWEsS0FBUyxNQUM5QkUsR0FBTyxJQUFJQyxNQUFPQyxVQUFhLElBQU1WLEVBQUtXLEtBQUtDLE1BQU0sS0FBSyxHQUMxREMsRUFBVyxDQUVYQyxNQUFPTixFQUVQTyxPQUFRLEdBRVJDLFNBQVUsQ0FBQyxZQUFZLGlCQUFpQixlQUV4Q0MsRUFBUyxDQUVUQyxjQUFjLEVBRWRDLFdBQVksRUFFWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3ZCLEVBQU1RLEVBQUtELEVBQU9NLEVBQVNJLEdBQzlDTyxVQUFVLENBRWpCQyxLQUFPN0IsRUFBSzhCLHFCQUVaQyxNQUFRL0IsRUFBS2dDLGlCQUViQyxTQUFZakMsRUFBS2tDLDZCQVN6Q3hDLFdBQVdDLFVBQVVtQyxxQkFBdUIsU0FBVUssR0FFbEQsSUFFSUMsRUFEUUQsRUFBU0UsTUFDREQsUUFDQTFDLFdBQVc0QyxjQUNqQkMsT0FDZCxJQUFJQyxFQUFjdEMsRUFBRSxpQkFDaEJ1QyxFQUFlTCxFQUFRTSxRQUFRLEdBQUssSUFDeENGLEVBQVlHLElBQUksQ0FBQ0MsTUFBU0gsSUFDMUJELEVBQVlLLEtBQUtKLElBSXJCL0MsV0FBV0MsVUFBVXFDLGlCQUFtQixTQUFVRCxHQUMxQnJDLFdBQVc0QyxjQUNqQlEsT0FDUSxrREFBbEJmLEVBQU1nQixTQUNOQyxPQUFPQyxXQUFXVixLQUFLLGFBSy9CN0MsV0FBV0MsVUFBVXVDLG9CQUFzQixTQUFVQyxHQUM3QnpDLFdBQVc0QyxjQUNqQlEsT0FDZCxJQUFJTixFQUFjdEMsRUFBRSxpQkFDcEJzQyxFQUFZRyxJQUFJLENBQUNDLE1BQVMsSUFDMUJKLEVBQVlLLEtBQUssTUFFakIsSUFBSUssRUFBUyxvQ0FBcUNmLEVBQVN2QixJQUN2Q1YsRUFBRSxtQkFDUmlELElBQUlELElBSXRCeEQsV0FBV0MsVUFBVUcsa0JBQW9CLFdBQ3JDLElBQUlzRCxFQUFTbEQsRUFBRSxZQUNma0QsRUFBT0MsTUFBTSxTQUFVQyxHQUNuQkEsRUFBTUMsaUJBQ04sSUFBSUMsRUFBVUosRUFBT0ssS0FBSyxnQkFDdEJDLEVBQVF4RCxFQUFFLHVCQUF1QmlELE1BQ2pDUSxFQUFPekQsRUFBRSxzQkFBc0JpRCxNQUMvQlMsRUFBWTFELEVBQUUsMkJBQTJCaUQsTUFDekNVLEVBQVczRCxFQUFFLDJCQUEyQmlELE1BQ3hDVyxFQUFTNUQsRUFBRSx3QkFBd0JpRCxNQUNuQ1ksRUFBVWYsT0FBT2dCLEdBQUdDLGFBRXhCM0QsUUFBUTRELEtBQUssQ0FDVDFELElBQU8sb0JBQ1AyRCxLQUFRLENBQ0pYLFFBQVdBLEVBQ1hFLE1BQVNBLEVBQ1RDLEtBQVFBLEVBQ1JDLFVBQWNBLEVBQ2RDLFNBQVlBLEVBQ1pFLFFBQVdBLEVBQ1hELE9BQVVBLEdBRWRyRCxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsT0FDYnNDLE9BQU9DLFdBQVdWLEtBQUssUUFFdkI2QixXQUFXLFdBQVdwQixPQUFPcUIsU0FBU0MsS0FBSyw0Q0FBNkMsWUFRNUdwRSxFQUFFLFlBQ21CLElBQUlSLFlBQ1ZFLE1BQ1hGLFdBQVc0QyxjQUFnQnBDLEVBQUUiLCJmaWxlIjoiZWRpdG9yX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRWRpdG9yTmV3cygpIHtcblxufVxuXG5FZGl0b3JOZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5saXN0ZW5TdW1iaXRFdmVudCgpO1xuICAgIHRoaXMubGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQoKVxufTtcblxuXG4vLyDkuIrkvKDmlofku7bliLDkuIPniZvkupFcbkVkaXRvck5ld3MucHJvdG90eXBlLmxpc3RlblFuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9xbnRva2VuJyxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBwdXRFeHRyYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tuWQjVxuICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luWPguaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmZkOWItueahOaWh+S7tuexu+Wei1xuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFsnaW1hZ2UvcG5nJywndmlkZW8veC1tcy13bXYnLCdpbWFnZS9qcGVnJ11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuWKoOmAn1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSx6LSl5ZCO5LuO5paw5LiK5Lyg55qE5qyh5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiD54mb5Zyw5Yy6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSxjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7bov4fnqIvkuK3lkYror4nkvaDkuIrkvKDlpJrlsJFcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmV4dFwiOnNlbGYudXBkYXRlVXBsb2FkUHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7blh7rnjrDplJnor69cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JcIjpzZWxmLnVwbG9hZEVycm9yRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmlofku7bkuIrkvKDmiJDlip/nmoTlm57osIPlh73mlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGxldGVcIjogc2VsZi5jb21wbGF0ZVVwbG9hZEV2ZW50XG4gICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5FZGl0b3JOZXdzLnByb3RvdHlwZS51cGRhdGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vIOS4iuS8oOi/h+eoi+S4reWBmueahOS6i+aDhVxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcbiAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBFZGl0b3JOZXdzLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xuICAgIHZhciBwcm9ncmVzc1RleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSc7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiBwcm9ncmVzc1RleHR9KTtcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHByb2dyZXNzVGV4dCk7XG5cbn07XG5cbkVkaXRvck5ld3MucHJvdG90eXBlLnVwbG9hZEVycm9yRXZlbnQgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IEVkaXRvck5ld3MucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ2ZpbGUgdHlwZSBkb2VzblxcJ3QgbWF0Y2ggd2l0aCB3aGF0IHlvdSBzcGVjaWZ5Jyl7XG4gICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+S4iuS8oOeahOaWh+S7tuS4jeWMuemFjScpO1xuICAgIH1cblxufTtcblxuRWRpdG9yTmV3cy5wcm90b3R5cGUuY29tcGxhdGVVcGxvYWRFdmVudCA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gRWRpdG9yTmV3cy5wcm9ncmVzc0dyb3VwO1xuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoJy5wcm9ncmVzcy1iYXInKTtcbiAgICBwcm9ncmVzc0Jhci5jc3Moeyd3aWR0aCc6IDB9KTtcbiAgICBwcm9ncmVzc0Jhci50ZXh0KCcwJScpO1xuXG4gICAgdmFyIGltZ1VybCA9ICdodHRwOi8vcHM5bHBmaDhxLmJrdC5jbG91ZGRuLmNvbS8nKyByZXNwb25zZS5rZXk7XG4gICAgdmFyIHRodW1ibmFpbEZyb20gPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICB0aHVtYm5haWxGcm9tLnZhbChpbWdVcmwpO1xufTtcblxuXG5FZGl0b3JOZXdzLnByb3RvdHlwZS5saXN0ZW5TdW1iaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3ViQnRuID0gJCgnI3N1Yi1idG4nKTtcbiAgICBzdWJCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBuZXdzX2lkID0gc3ViQnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XG4gICAgICAgIHZhciBhdXRob3IgPSAkKFwiaW5wdXRbbmFtZT0nYXV0aG9yJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL2VkaXRvcl9uZXdzLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnbmV3c19pZCc6IG5ld3NfaWQsXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiAgdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcbiAgICAgICAgICAgICAgICAnYXV0aG9yJzogYXV0aG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygn57yW6L6R5oiQ5YqfJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovLzEyOS4yOC4xNTguMTk1OjgwMDAvY21zL25ld3NMaXN0L1wiO30sMzAwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG59O1xuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBlZGl0b3JOZXdzID0gbmV3IEVkaXRvck5ld3MoKTtcbiAgICBlZGl0b3JOZXdzLnJ1bigpO1xuICAgIEVkaXRvck5ld3MucHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xufSk7XG4iXX0=
