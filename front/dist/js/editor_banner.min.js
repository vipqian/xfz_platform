function EditorBanner(){this.imageGroup=$("#banner-group")}EditorBanner.prototype.initBanner=function(){},EditorBanner.prototype.listenQnUploadFileEvent=function(){var i=this,n=$("#thumbnail-btn");n.change(function(){var a=n[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(n){if(200===n.code){var e=n.data.token,t=(new Date).getTime()+"."+a.name.split(".")[1],o={fname:t,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},r={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(a,t,e,o,r).subscribe({next:i.updateUploadProgress,error:i.uploadErrorEvent,complete:i.complateUploadEvent})}}})})},EditorBanner.prototype.updateUploadProgress=function(n){var e=n.total.percent;EditorBanner.progressGroup.show();var t=$(".progress-bar"),o=e.toFixed(0)+"%";t.css({width:o}),t.text(o)},EditorBanner.prototype.uploadErrorEvent=function(n){EditorBanner.progressGroup.hide(),"file type doesn't match with what you specify"===n.message&&window.messageBox.show("上传的文件不匹配")},EditorBanner.prototype.complateUploadEvent=function(n){EditorBanner.progressGroup.hide();var e=$(".progress-bar");e.css({width:0}),e.text("0%");var t="http://ps9lpfh8q.bkt.clouddn.com/"+n.key;$("#thumbnail-form").val(t);var o=$("#banner-group");document.getElementById("banner-group").src=t,o.show()},EditorBanner.prototype.run=function(){this.initBanner(),this.listenUploadFileEvent()},EditorBanner.prototype.listenSubBtn=function(){var a=$("#sub-btn");a.click(function(n){n.preventDefault();var e=a.attr("data-banner-id"),t=$("input[name='image-url']").val(),o=$("input[name='priority']").val(),r=$("input[name='link-to']").val();console.log(e),xfzajax.post({url:"/cms/edit_banner/",data:{banner_id:e,image_url:t,priority:o,link_to:r},success:function(n){200===n.code?(window.messageBox.show("编辑成功"),setTimeout(function(){window.location.href="http://129.28.158.195:8000/cms/banners/"},2e3)):window.messageBox.show(n.message)}})})},EditorBanner.prototype.listenUploadFileEvent=function(){var t=$("#thumbnail-btn");t.change(function(){var n=t[0].files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){url=n.data.url,$("#thumbnail-form").val(url);var e=$("#banner-group");document.getElementById("banner-group").src=url,e.show()}}})})},$(function(){var n=new EditorBanner;n.run(),n.listenSubBtn(),EditorBanner.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRvcl9iYW5uZXIuanMiXSwibmFtZXMiOlsiRWRpdG9yQmFubmVyIiwidGhpcyIsImltYWdlR3JvdXAiLCIkIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsImxpc3RlblFuVXBsb2FkRmlsZUV2ZW50Iiwic2VsZiIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsInB1dEV4dHJhIiwiZm5hbWUiLCJwYXJhbXMiLCJtaW1lVHlwZSIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsInVwZGF0ZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJ1cGxvYWRFcnJvckV2ZW50IiwiY29tcGxldGUiLCJjb21wbGF0ZVVwbG9hZEV2ZW50IiwicmVzcG9uc2UiLCJwZXJjZW50IiwidG90YWwiLCJwcm9ncmVzc0dyb3VwIiwic2hvdyIsInByb2dyZXNzQmFyIiwicHJvZ3Jlc3NUZXh0IiwidG9GaXhlZCIsImNzcyIsIndpZHRoIiwidGV4dCIsImhpZGUiLCJtZXNzYWdlIiwid2luZG93IiwibWVzc2FnZUJveCIsImltZ1VybCIsInZhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJydW4iLCJsaXN0ZW5VcGxvYWRGaWxlRXZlbnQiLCJsaXN0ZW5TdWJCdG4iLCJzdWJCdG4iLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJiYW5uZXJfaWQiLCJhdHRyIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJsaW5rX3RvIiwiY29uc29sZSIsImxvZyIsInBvc3QiLCJkYXRhIiwic2V0VGltZW91dCIsImxvY2F0aW9uIiwiaHJlZiIsImZyb21EYXRhIiwiRm9ybURh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RUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFReEUsR0FDeEJFLFFBQVErRCxLQUFLLENBQ1Q3RCxJQUFPLG9CQUNQOEQsS0FBUUksRUFDUkcsYUFBZSxFQUNmQyxhQUFlLEVBQ2ZyRSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEJGLElBQU1FLEVBQWEsS0FBTyxJQUNOYixFQUFFLG1CQUNSc0QsSUFBSTNDLEtBQ2xCLElBQUlaLEVBQWFDLEVBQUUsaUJBQ25CdUQsU0FBU0MsZUFBZSxnQkFBZ0JDLElBQU05QyxJQUM5Q1osRUFBVzJDLGNBUy9CMUMsRUFBRSxXQUNFLElBQUlrRixFQUFlLElBQUlyRixhQUN2QnFGLEVBQWF4QixNQUNid0IsRUFBYXRCLGVBQ2IvRCxhQUFhNEMsY0FBZ0J6QyxFQUFFIiwiZmlsZSI6ImVkaXRvcl9iYW5uZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRWRpdG9yQmFubmVyKCkge1xuICAgIHRoaXMuaW1hZ2VHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKVxufVxuXG5cbkVkaXRvckJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xufTtcblxuXG5FZGl0b3JCYW5uZXIucHJvdG90eXBlLmxpc3RlblFuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9xbnRva2VuJyxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBwdXRFeHRyYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tuWQjVxuICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luWPguaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmZkOWItueahOaWh+S7tuexu+Wei1xuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFsnaW1hZ2UvcG5nJywndmlkZW8veC1tcy13bXYnLCdpbWFnZS9qcGVnJ11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuWKoOmAn1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSx6LSl5ZCO5LuO5paw5LiK5Lyg55qE5qyh5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiD54mb5Zyw5Yy6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSxjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7bov4fnqIvkuK3lkYror4nkvaDkuIrkvKDlpJrlsJFcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmV4dFwiOnNlbGYudXBkYXRlVXBsb2FkUHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7blh7rnjrDplJnor69cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JcIjpzZWxmLnVwbG9hZEVycm9yRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmlofku7bkuIrkvKDmiJDlip/nmoTlm57osIPlh73mlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGxldGVcIjogc2VsZi5jb21wbGF0ZVVwbG9hZEV2ZW50XG4gICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5FZGl0b3JCYW5uZXIucHJvdG90eXBlLnVwZGF0ZVVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgLy8g5LiK5Lyg6L+H56iL5Lit5YGa55qE5LqL5oOFXG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gRWRpdG9yQmFubmVyLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xuICAgIHZhciBwcm9ncmVzc1RleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSc7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiBwcm9ncmVzc1RleHR9KTtcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHByb2dyZXNzVGV4dCk7XG5cbn07XG5cblxuRWRpdG9yQmFubmVyLnByb3RvdHlwZS51cGxvYWRFcnJvckV2ZW50ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBFZGl0b3JCYW5uZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ2ZpbGUgdHlwZSBkb2VzblxcJ3QgbWF0Y2ggd2l0aCB3aGF0IHlvdSBzcGVjaWZ5Jyl7XG4gICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+S4iuS8oOeahOaWh+S7tuS4jeWMuemFjScpO1xuICAgIH1cblxufTtcblxuRWRpdG9yQmFubmVyLnByb3RvdHlwZS5jb21wbGF0ZVVwbG9hZEV2ZW50ID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBFZGl0b3JCYW5uZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dCgnMCUnKTtcblxuICAgIHZhciBpbWdVcmwgPSAnaHR0cDovL3BzOWxwZmg4cS5ia3QuY2xvdWRkbi5jb20vJysgcmVzcG9uc2Uua2V5O1xuICAgIHZhciB0aHVtYm5haWxGcm9tID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XG4gICAgdGh1bWJuYWlsRnJvbS52YWwoaW1nVXJsKTtcbiAgICB2YXIgaW1hZ2VHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFubmVyLWdyb3VwJykuc3JjID0gaW1nVXJsO1xuICAgIGltYWdlR3JvdXAuc2hvdygpO1xuXG59O1xuXG5cbkVkaXRvckJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcbiAgICB0aGlzLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpXG59O1xuXG5cblxuXG5FZGl0b3JCYW5uZXIucHJvdG90eXBlLmxpc3RlblN1YkJ0biA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHN1YkJ0biA9ICQoJyNzdWItYnRuJyk7XG4gICAgc3ViQnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYmFubmVyX2lkID0gc3ViQnRuLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XG4gICAgICAgIHZhciBpbWFnZV91cmwgPSAkKFwiaW5wdXRbbmFtZT0naW1hZ2UtdXJsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBwcmlvcml0eSA9ICQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgbGlua190byA9ICQoXCJpbnB1dFtuYW1lPSdsaW5rLXRvJ11cIikudmFsKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGJhbm5lcl9pZCk7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgJ3VybCc6ICcvY21zL2VkaXRfYmFubmVyLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJfaWQsXG4gICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzogaW1hZ2VfdXJsLFxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzogbGlua190b1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+e8lui+keaIkOWKnycpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovLzEyOS4yOC4xNTguMTk1OjgwMDAvY21zL2Jhbm5lcnMvXCI7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhyZXN1bHRbJ21lc3NhZ2UnXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkVkaXRvckJhbm5lci5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgdmFyIGZyb21EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZyb21EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXG4gICAgICAgICAgICAnZGF0YSc6IGZyb21EYXRhLFxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbEZyb20gPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsRnJvbS52YWwodXJsKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlR3JvdXAgPSAkKCcjYmFubmVyLWdyb3VwJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYW5uZXItZ3JvdXAnKS5zcmMgPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlR3JvdXAuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfSlcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBlZGl0b3JCYW5uZXIgPSBuZXcgRWRpdG9yQmFubmVyKCk7XG4gICAgZWRpdG9yQmFubmVyLnJ1bigpO1xuICAgIGVkaXRvckJhbm5lci5saXN0ZW5TdWJCdG4oKTtcbiAgICBFZGl0b3JCYW5uZXIucHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xufSk7Il19
