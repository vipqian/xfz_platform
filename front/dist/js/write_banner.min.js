function Banner(){this.imageGroup=$("#banner-group")}Banner.prototype.initBanner=function(){this.imageGroup.hide()},Banner.prototype.listenQnUploadFileEvent=function(){var i=this,n=$("#thumbnail-btn");n.change(function(){var a=n[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(n){if(200===n.code){var e=n.data.token,t=(new Date).getTime()+"."+a.name.split(".")[1],o={fname:t,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},r={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(a,t,e,o,r).subscribe({next:i.updateUploadProgress,error:i.uploadErrorEvent,complete:i.complateUploadEvent})}}})})},Banner.prototype.updateUploadProgress=function(n){var e=n.total.percent;Banner.progressGroup.show();var t=$(".progress-bar"),o=e.toFixed(0)+"%";t.css({width:o}),t.text(o)},Banner.prototype.uploadErrorEvent=function(n){Banner.progressGroup.hide(),"file type doesn't match with what you specify"===n.message&&window.messageBox.show("上传的文件不匹配")},Banner.prototype.complateUploadEvent=function(n){Banner.progressGroup.hide();var e=$(".progress-bar");e.css({width:0}),e.text("0%");var t="http://ps9lpfh8q.bkt.clouddn.com/"+n.key;$("#thumbnail-form").val(t);var o=$("#banner-group");document.getElementById("banner-group").src=t,o.show()},Banner.prototype.listenUploadFileEvent=function(){var t=$("#thumbnail-btn");t.change(function(){var n=t[0].files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){200===n.code&&(url=n.data.url,$("#thumbnail-form").val(url))}})})},Banner.prototype.run=function(){this.initBanner(),this.listenUploadFileEvent()},Banner.prototype.listenSubBtn=function(){$("#sub-btn").click(function(n){n.preventDefault();var e=$("input[name='image-url']").val(),t=$("input[name='priority']").val(),o=$("input[name='link-to']").val();xfzajax.post({url:"/cms/write_banner/",data:{image_url:e,priority:t,link_to:o},success:function(n){200===n.code?(window.messageBox.show("发布成功"),setTimeout(function(){window.location.href="http://127.0.0.1:8000/cms/banners/"},2e3)):window.messageBox.show(n.message)}})})},$(function(){var n=new Banner;n.run(),n.listenSubBtn(),Banner.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX2Jhbm5lci5qcyJdLCJuYW1lcyI6WyJCYW5uZXIiLCJ0aGlzIiwiaW1hZ2VHcm91cCIsIiQiLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiaGlkZSIsImxpc3RlblFuVXBsb2FkRmlsZUV2ZW50Iiwic2VsZiIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsInB1dEV4dHJhIiwiZm5hbWUiLCJwYXJhbXMiLCJtaW1lVHlwZSIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsInVwZGF0ZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJ1cGxvYWRFcnJvckV2ZW50IiwiY29tcGxldGUiLCJjb21wbGF0ZVVwbG9hZEV2ZW50IiwicmVzcG9uc2UiLCJwZXJjZW50IiwidG90YWwiLCJwcm9ncmVzc0dyb3VwIiwic2hvdyIsInByb2dyZXNzQmFyIiwicHJvZ3Jlc3NUZXh0IiwidG9GaXhlZCIsImNzcyIsIndpZHRoIiwidGV4dCIsIm1lc3NhZ2UiLCJ3aW5kb3ciLCJtZXNzYWdlQm94IiwiaW1nVXJsIiwidmFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsImZyb21EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJydW4iLCJsaXN0ZW5TdWJCdG4iLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJpbWFnZV91cmwiLCJwcmlvcml0eSIsImxpbmtfdG8iLCJzZXRUaW1lb3V0IiwibG9jYXRpb24iLCJocmVmIiwiYmFubmVyIl0s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Q3ZCK0IsV0FBVyxXQUVQdkIsT0FBT3dCLFNBQVNDLEtBQUssc0NBQ3RCLE1BRUh6QixPQUFPQyxXQUFXVCxLQUFLN0IsRUFBZ0IsZUFPM0RkLEVBQUUsV0FDRSxJQUFJNkUsRUFBUyxJQUFJaEYsT0FDakJnRixFQUFPWCxNQUNQVyxFQUFPVixlQUNQdEUsT0FBTzZDLGNBQWdCMUMsRUFBRSIsImZpbGUiOiJ3cml0ZV9iYW5uZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFubmVyKCkge1xuICAgIHRoaXMuaW1hZ2VHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKVxufVxuXG5cbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuaW1hZ2VHcm91cC5oaWRlKCk7XG59O1xuXG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4nLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25ZCNXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuW5Y+C5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ZmQ5Yi255qE5paH5Lu257G75Z6LXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCd2aWRlby94LW1zLXdtdicsJ2ltYWdlL2pwZWcnXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5piv5ZCm5Yqg6YCfXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpLHotKXlkI7ku47mlrDkuIrkvKDnmoTmrKHmlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIPniZvlnLDljLpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnoyXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaWh+S7tui/h+eoi+S4reWRiuivieS9oOS4iuS8oOWkmuWwkVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0XCI6c2VsZi51cGRhdGVVcGxvYWRQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaWh+S7tuWHuueOsOmUmeivr1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvclwiOnNlbGYudXBsb2FkRXJyb3JFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tuS4iuS8oOaIkOWKn+eahOWbnuiwg+WHveaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wbGV0ZVwiOiBzZWxmLmNvbXBsYXRlVXBsb2FkRXZlbnRcbiAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn07XG5cbkJhbm5lci5wcm90b3R5cGUudXBkYXRlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyDkuIrkvKDov4fnqIvkuK3lgZrnmoTkuovmg4VcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gQmFubmVyLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xuICAgIHZhciBwcm9ncmVzc1RleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSc7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiBwcm9ncmVzc1RleHR9KTtcbiAgICBwcm9ncmVzc0Jhci50ZXh0KHByb2dyZXNzVGV4dCk7XG5cbn07XG5cblxuQmFubmVyLnByb3RvdHlwZS51cGxvYWRFcnJvckV2ZW50ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBCYW5uZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ2ZpbGUgdHlwZSBkb2VzblxcJ3QgbWF0Y2ggd2l0aCB3aGF0IHlvdSBzcGVjaWZ5Jyl7XG4gICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3coJ+S4iuS8oOeahOaWh+S7tuS4jeWMuemFjScpO1xuICAgIH1cblxufTtcblxuQmFubmVyLnByb3RvdHlwZS5jb21wbGF0ZVVwbG9hZEV2ZW50ID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBCYW5uZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dCgnMCUnKTtcblxuICAgIHZhciBpbWdVcmwgPSAnaHR0cDovL3BzOWxwZmg4cS5ia3QuY2xvdWRkbi5jb20vJysgcmVzcG9uc2Uua2V5O1xuICAgIHZhciB0aHVtYm5haWxGcm9tID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XG4gICAgdGh1bWJuYWlsRnJvbS52YWwoaW1nVXJsKTtcbiAgICB2YXIgaW1hZ2VHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFubmVyLWdyb3VwJykuc3JjID0gaW1nVXJsO1xuICAgIGltYWdlR3JvdXAuc2hvdygpO1xuXG59O1xuXG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgdmFyIGZyb21EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZyb21EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXG4gICAgICAgICAgICAnZGF0YSc6IGZyb21EYXRhLFxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcbiAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsRnJvbSA9ICQoJyN0aHVtYm5haWwtZm9ybScpO1xuICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbEZyb20udmFsKHVybClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH0pXG59O1xuXG5cbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcbiAgICAvLyB0aGlzLmxpc3RlblFuVXBsb2FkRmlsZUV2ZW50KClcbiAgICB0aGlzLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xufTtcblxuXG5cblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5TdWJCdG4gPSBmdW5jdGlvbigpe1xuICAgIHZhciBzdWJCdG4gPSAkKCcjc3ViLWJ0bicpO1xuICAgIHN1YkJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGltYWdlX3VybCA9ICQoXCJpbnB1dFtuYW1lPSdpbWFnZS11cmwnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gJChcImlucHV0W25hbWU9J3ByaW9yaXR5J11cIikudmFsKCk7XG4gICAgICAgIHZhciBsaW5rX3RvID0gJChcImlucHV0W25hbWU9J2xpbmstdG8nXVwiKS52YWwoKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAndXJsJzogJy9jbXMvd3JpdGVfYmFubmVyLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICdpbWFnZV91cmwnOiBpbWFnZV91cmwsXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb3JpdHksXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdygn5Y+R5biD5oiQ5YqfJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWY9XCJodHRwOi8vMTI5LjI4LjE1OC4xOTU6ODAwMC9jbXMvYmFubmVycy9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovLzEyNy4wLjAuMTo4MDAwL2Ntcy9iYW5uZXJzL1wiO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cocmVzdWx0WydtZXNzYWdlJ10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgIGJhbm5lci5ydW4oKTtcbiAgICBiYW5uZXIubGlzdGVuU3ViQnRuKCk7XG4gICAgQmFubmVyLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcbn0pOyJdfQ==
