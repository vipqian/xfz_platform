function AddTeacher(){}AddTeacher.prototype.listenUploadFileEvent=function(){var o=$("#thumbnail-btn");o.change(function(){var e=o[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){200===e.code&&(url=e.data.url,$("#thumbnail-form").val(url))}})})},AddTeacher.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},AddTeacher.prototype.listenQnUploadFileEvent=function(){var i=this,e=$("#thumbnail-btn");e.change(function(){var r=e[0].files[0];xfzajax.get({url:"/cms/qntoken",success:function(e){if(200===e.code){var t=e.data.token,o=(new Date).getTime()+"."+r.name.split(".")[1],a={fname:o,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg"]},n={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(r,o,t,a,n).subscribe({next:i.updateUploadProgress,error:i.uploadErrorEvent,complete:i.complateUploadEvent})}}})})},AddTeacher.prototype.updateUploadProgress=function(e){var t=e.total.percent;AddTeacher.progressGroup.show();var o=$(".progress-bar"),a=t.toFixed(0)+"%";o.css({width:a}),o.text(a)},AddTeacher.prototype.uploadErrorEvent=function(e){AddTeacher.progressGroup.hide(),"file type doesn't match with what you specify"===e.message&&window.messageBox.show("上传的文件不匹配")},AddTeacher.prototype.complateUploadEvent=function(e){AddTeacher.progressGroup.hide();var t=$(".progress-bar");t.css({width:0}),t.text("0%");var o="http://ps9lpfh8q.bkt.clouddn.com/"+e.key;$("#thumbnail-form").val(o)},AddTeacher.prototype.listenSumbitEvent=function(){$("#sub-btn").click(function(e){e.preventDefault();var t=$("input[name='name']").val(),o=$("input[name='jobtitle']").val(),a=$("input[name='avatar']").val(),n=window.ue.getContent();console.log(t,o,a,n),xfzajax.post({url:"/cms/add_teacher/",data:{name:t,jobtitle:o,avatar:a,profile:n},success:function(e){if(console.log(e),200===e.code)window.messageBox.show("发布成功"),setTimeout(function(){window.location.href="http://129.28.158.195:8000/cms/teacher_list/"},3e3);else{var t=e.message;if("string"==typeof t||"String"==t.constructor)window.messageBox.show(e.message);else for(var o in t){var a=t[o][0];window.messageBox.show(a)}}}})})},AddTeacher.prototype.run=function(){this.initUEditor(),this.listenUploadFileEvent(),this.listenSumbitEvent()},$(function(){(new AddTeacher).run(),AddTeacher.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZF90ZWFjaGVyLmpzIl0sIm5hbWVzIjpbIkFkZFRlYWNoZXIiLCJwcm90b3R5cGUiLCJsaXN0ZW5VcGxvYWRGaWxlRXZlbnQiLCJ1cGxvYWRCdG4iLCIkIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZnJvbURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwiaW5pdFVFZGl0b3IiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwibGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQiLCJzZWxmIiwidGhpcyIsImdldCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VDZG5Eb21haW4iLCJyZXRyeUNvdW50IiwicmVnaW9uIiwicWluaXUiLCJ6MiIsInVwbG9hZCIsInN1YnNjcmliZSIsIm5leHQiLCJ1cGRhdGVVcGxvYWRQcm9ncmVzcyIsImVycm9yIiwidXBsb2FkRXJyb3JFdmVudCIsImNvbXBsZXRlIiwiY29tcGxhdGVVcGxvYWRFdmVudCIsInJlc3BvbnNlIiwicGVyY2VudCIsInRvdGFsIiwicHJvZ3Jlc3NHcm91cCIsInNob3ciLCJwcm9ncmVzc0JhciIsInByb2dyZXNzVGV4dCIsInRvRml4ZWQiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJoaWRlIiwibWVzc2FnZSIsIm1lc3NhZ2VCb3giLCJpbWdVcmwiLCJsaXN0ZW5TdW1iaXRFdmVudCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImpvYnRpdGxlIiwiYXZhdGFyIiwiY29udGVudCIsImdldENvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwicHJvZmlsZSIsInNldFRpbWVvdXQiLCJsb2NhdGlvbiIsImhyZWYiLCJtZXNzYWdlT2JqZWN0IiwiY29uc3RydWN0b3IiLCJydW4iXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLGNBS1RBLFdBQVdDLFVBQVVDLHNCQUF3QixXQUN6QyxJQUFJQyxFQUFZQyxFQUFFLGtCQUNsQkQsRUFBVUUsT0FBTyxXQUNiLElBQUlDLEVBQU9ILEVBQVUsR0FBR0ksTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE9BQ2JMLElBQU1LLEVBQWEsS0FBTyxJQUNQZCxFQUFFLG1CQUNSZSxJQUFJTixZQVNyQ2IsV0FBV0MsVUFBVW1CLFlBQWMsV0FDL0JDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBUyxDQUU5QkMsbUJBQXNCLElBRXRCQyxVQUFhLHNCQUlyQjFCLFdBQVdDLFVBQVUwQix3QkFBMEIsV0FDM0MsSUFBSUMsRUFBT0MsS0FDUDFCLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzlCSSxRQUFRbUIsSUFBSSxDQUNSakIsSUFBTyxlQUNQSSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdkIsSUFBSWEsRUFBUWIsRUFBYSxLQUFTLE1BQzlCYyxHQUFPLElBQUlDLE1BQU9DLFVBQWEsSUFBTTVCLEVBQUs2QixLQUFLQyxNQUFNLEtBQUssR0FDMURDLEVBQVcsQ0FFWEMsTUFBT04sRUFFUE8sT0FBUSxHQUVSQyxTQUFVLENBQUMsWUFBWSxpQkFBaUIsZUFFeENDLEVBQVMsQ0FFVEMsY0FBYyxFQUVkQyxXQUFZLEVBRVpDLE9BQVFDLE1BQU1ELE9BQU9FLElBRVJELE1BQU1FLE9BQU96QyxFQUFNMEIsRUFBS0QsRUFBT00sRUFBU0ksR0FDOUNPLFVBQVUsQ0FFakJDLEtBQU9yQixFQUFLc0IscUJBRVpDLE1BQVF2QixFQUFLd0IsaUJBRWJDLFNBQVl6QixFQUFLMEIsNkJBU3pDdEQsV0FBV0MsVUFBVWlELHFCQUF1QixTQUFVSyxHQUVsRCxJQUVJQyxFQURRRCxFQUFTRSxNQUNERCxRQUNBeEQsV0FBVzBELGNBQ2pCQyxPQUNkLElBQUlDLEVBQWN4RCxFQUFFLGlCQUNoQnlELEVBQWVMLEVBQVFNLFFBQVEsR0FBSyxJQUN4Q0YsRUFBWUcsSUFBSSxDQUFDQyxNQUFTSCxJQUMxQkQsRUFBWUssS0FBS0osSUFJckI3RCxXQUFXQyxVQUFVbUQsaUJBQW1CLFNBQVVELEdBQzFCbkQsV0FBVzBELGNBQ2pCUSxPQUNRLGtEQUFsQmYsRUFBTWdCLFNBQ045QyxPQUFPK0MsV0FBV1QsS0FBSyxhQUsvQjNELFdBQVdDLFVBQVVxRCxvQkFBc0IsU0FBVUMsR0FDN0J2RCxXQUFXMEQsY0FDakJRLE9BQ2QsSUFBSU4sRUFBY3hELEVBQUUsaUJBQ3BCd0QsRUFBWUcsSUFBSSxDQUFDQyxNQUFTLElBQzFCSixFQUFZSyxLQUFLLE1BRWpCLElBQUlJLEVBQVMsb0NBQXFDZCxFQUFTdkIsSUFDdkM1QixFQUFFLG1CQUNSZSxJQUFJa0QsSUFHdEJyRSxXQUFXQyxVQUFVcUUsa0JBQW9CLFdBQ3hCbEUsRUFBRSxZQUNSbUUsTUFBTSxTQUFVQyxHQUNuQkEsRUFBTUMsaUJBQ04sSUFBSXRDLEVBQU8vQixFQUFFLHNCQUFzQmUsTUFDL0J1RCxFQUFXdEUsRUFBRSwwQkFBMEJlLE1BQ3ZDd0QsRUFBU3ZFLEVBQUUsd0JBQXdCZSxNQUNuQ3lELEVBQVV2RCxPQUFPQyxHQUFHdUQsYUFFeEJDLFFBQVFDLElBQUk1QyxFQUFNdUMsRUFBVUMsRUFBUUMsR0FFcENqRSxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVEsQ0FDSnFCLEtBQVFBLEVBQ1J1QyxTQUFZQSxFQUNaQyxPQUFXQSxFQUNYSyxRQUFXSixHQUVmM0QsUUFBVyxTQUFVQyxHQUVqQixHQURBNEQsUUFBUUMsSUFBSTdELEdBQ1csTUFBbkJBLEVBQWEsS0FDYkcsT0FBTytDLFdBQVdULEtBQUssUUFDdkJzQixXQUFXLFdBQVc1RCxPQUFPNkQsU0FBU0MsS0FBSyxnREFBaUQsU0FDMUYsQ0FDRixJQUFJQyxFQUFnQmxFLEVBQWdCLFFBRXBDLEdBQTRCLGlCQUFqQmtFLEdBQTBELFVBQTdCQSxFQUFjQyxZQUNsRGhFLE9BQU8rQyxXQUFXVCxLQUFLekMsRUFBZ0IsY0FFdkMsSUFBSyxJQUFJYyxLQUFPb0QsRUFBZSxDQUMzQixJQUNJakIsRUFEV2lCLEVBQWNwRCxHQUNOLEdBQ3ZCWCxPQUFPK0MsV0FBV1QsS0FBS1EsV0FXbkRuRSxXQUFXQyxVQUFVcUYsSUFBTSxXQUN2QnpELEtBQUtULGNBRUxTLEtBQUszQix3QkFDTDJCLEtBQUt5QyxxQkFJVGxFLEVBQUUsWUFDbUIsSUFBSUosWUFDVnNGLE1BQ1h0RixXQUFXMEQsY0FBZ0J0RCxFQUFFIiwiZmlsZSI6ImFkZF90ZWFjaGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZnVuY3Rpb24gQWRkVGVhY2hlcigpIHtcblxufVxuXG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmcm9tRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmcm9tRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxuICAgICAgICAgICAgJ2RhdGEnOiBmcm9tRGF0YSxcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbEZyb20gPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxGcm9tLnZhbCh1cmwpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9KVxufTtcblxuQWRkVGVhY2hlci5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93LnVlID0gVUUuZ2V0RWRpdG9yKCdlZGl0b3InLHtcbiAgICAgICAgLy8g57yW6L6R5Zmo6auY5bqmXG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXG4gICAgICAgIC8vIOS9v+eUqOWbvueJh+S4iuS8oFxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXG4gICAgfSk7XG59O1xuXG5BZGRUZWFjaGVyLnByb3RvdHlwZS5saXN0ZW5RblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvcW50b2tlbicsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSArICcuJyArIGZpbGUubmFtZS5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmlofku7blkI1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5blj4LmlbBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpmZDliLbnmoTmlofku7bnsbvlnotcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsJ3ZpZGVvL3gtbXMtd212JywnaW1hZ2UvanBlZyddXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmmK/lkKbliqDpgJ9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWksei0peWQjuS7juaWsOS4iuS8oOeahOasoeaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4g+eJm+WcsOWMulxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSwga2V5LCB0b2tlbiwgcHV0RXh0cmEsY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5paH5Lu26L+H56iL5Lit5ZGK6K+J5L2g5LiK5Lyg5aSa5bCRXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5leHRcIjpzZWxmLnVwZGF0ZVVwbG9hZFByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5paH5Lu25Ye6546w6ZSZ6K+vXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yXCI6c2VsZi51cGxvYWRFcnJvckV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25LiK5Lyg5oiQ5Yqf55qE5Zue6LCD5Ye95pWwXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBsZXRlXCI6IHNlbGYuY29tcGxhdGVVcGxvYWRFdmVudFxuICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxufTtcblxuQWRkVGVhY2hlci5wcm90b3R5cGUudXBkYXRlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyDkuIrkvKDov4fnqIvkuK3lgZrnmoTkuovmg4VcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gQWRkVGVhY2hlci5wcm9ncmVzc0dyb3VwO1xuICAgIHByb2dyZXNzR3JvdXAuc2hvdygpO1xuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoJy5wcm9ncmVzcy1iYXInKTtcbiAgICB2YXIgcHJvZ3Jlc3NUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApICsgJyUnO1xuICAgIHByb2dyZXNzQmFyLmNzcyh7J3dpZHRoJzogcHJvZ3Jlc3NUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwcm9ncmVzc1RleHQpO1xuXG59O1xuXG5BZGRUZWFjaGVyLnByb3RvdHlwZS51cGxvYWRFcnJvckV2ZW50ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBBZGRUZWFjaGVyLnByb2dyZXNzR3JvdXA7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdmaWxlIHR5cGUgZG9lc25cXCd0IG1hdGNoIHdpdGggd2hhdCB5b3Ugc3BlY2lmeScpe1xuICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCfkuIrkvKDnmoTmlofku7bkuI3ljLnphY0nKTtcbiAgICB9XG5cbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmNvbXBsYXRlVXBsb2FkRXZlbnQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IEFkZFRlYWNoZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsnd2lkdGgnOiAwfSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dCgnMCUnKTtcblxuICAgIHZhciBpbWdVcmwgPSAnaHR0cDovL3BzOWxwZmg4cS5ia3QuY2xvdWRkbi5jb20vJysgcmVzcG9uc2Uua2V5O1xuICAgIHZhciB0aHVtYm5haWxGcm9tID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XG4gICAgdGh1bWJuYWlsRnJvbS52YWwoaW1nVXJsKTtcbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmxpc3RlblN1bWJpdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdWJCdG4gPSAkKCcjc3ViLWJ0bicpO1xuICAgIHN1YkJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiaW5wdXRbbmFtZT0nbmFtZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgam9idGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0nam9idGl0bGUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGF2YXRhciA9ICQoXCJpbnB1dFtuYW1lPSdhdmF0YXInXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKG5hbWUsIGpvYnRpdGxlLCBhdmF0YXIsIGNvbnRlbnQpO1xuXG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvYWRkX3RlYWNoZXIvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICduYW1lJzogbmFtZSxcbiAgICAgICAgICAgICAgICAnam9idGl0bGUnOiBqb2J0aXRsZSxcbiAgICAgICAgICAgICAgICAnYXZhdGFyJzogIGF2YXRhcixcbiAgICAgICAgICAgICAgICAncHJvZmlsZSc6IGNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KCflj5HluIPmiJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovLzEyOS4yOC4xNTguMTk1OjgwMDAvY21zL3RlYWNoZXJfbGlzdC9cIjt9LDMwMDApXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xuICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreaYr+S4jeaYr+Wtl+espuS4slxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2VPYmplY3QgPT0gXCJzdHJpbmdcIiB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09ICdTdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KHJlc3VsdFsnbWVzc2FnZSddKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gbWVzc2FnZU9iamVjdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcbn07XG5cblxuXG5BZGRUZWFjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbml0VUVkaXRvcigpO1xuICAgIC8vIHRoaXMubGlzdGVuUW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICB0aGlzLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xuICAgIHRoaXMubGlzdGVuU3VtYml0RXZlbnQoKTtcbn07XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFkZFRlYWNoZXIgPSBuZXcgQWRkVGVhY2hlcigpO1xuICAgIGFkZFRlYWNoZXIucnVuKCk7XG4gICAgQWRkVGVhY2hlci5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XG59KTtcbiJdfQ==
